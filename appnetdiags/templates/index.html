<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Aнализатор и диагностика локальной сети САО РАН</title>
<!--    <link href="{% static 'css/styles2.css' %}" rel = "stylesheet">-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>
<table width="100%">
    <tr>
        <td><center><h2>NetDiags</h2>диагностика локальной сети САО РАН</center></td>
        <td align="right"><a href="/admin/">[О сервисе]</td>
        <td align="right"><a href="/admin/">[Обратная связь]</td>
        <td align="right"><a href="/admin/">[Вход в админку] </td>
    </tr>
</table>


<hr>

<form action="/" method="POST">
    {% csrf_token %}
    {{ form }}
    Метод проверки:
    <select name="service">
<!--        <option disabled>Выбор типа проверки</option>-->
        <option>ping</option>
        <option>порты и службы</option>
    </select>

    <input type="submit" name="Button" value="Начать проверку">
<!--           onclick="document.write('нажата кнопка проверки');">-->

</form>
<hr>
Оправлено пакетов: <b>{{ ping_count1 }}</b>
<br>
Среднее время отклика: <b>{{ lost_count1 }}</b>

<script>
    document.getElementById("id_sector_name").addEventListener("change", function() {
        var sector_id = this.value;
        var serverSelect = document.getElementById("id_server_name");
        serverSelect.innerHTML = "";
        fetch("/start/" + sector_id + "/")
            .then(response => response.json())
            .then(data => {
                data.forEach(function(server) {
                    var option = document.createElement("option");
                    option.value = server.id;
                    option.text = server.name;
                    serverSelect.add(option);
                });
            });
    });
</script>

</body>
</html>